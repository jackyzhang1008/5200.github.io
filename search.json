[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Healthcare System",
    "section": "",
    "text": "Healthcare Facts Interactive Display\n    \n\n\n\n\n    \n\n\n    Healthcare spending in the U.S. is the highest in the world.\n    The U.S. does not have a universal healthcare system.\n    Prescription drug prices in the U.S. are higher than in other countries.\n    The Affordable Care Act aimed to increase healthcare coverage.\n    There is ongoing debate in the U.S. about the best approach to healthcare reform."
  },
  {
    "objectID": "index.html#facts-about-the-healthcare-system",
    "href": "index.html#facts-about-the-healthcare-system",
    "title": "Healthcare System",
    "section": "",
    "text": "Healthcare Facts Interactive Display\n    \n\n\n\n\n    \n\n\n    Healthcare spending in the U.S. is the highest in the world.\n    The U.S. does not have a universal healthcare system.\n    Prescription drug prices in the U.S. are higher than in other countries.\n    The Affordable Care Act aimed to increase healthcare coverage.\n    There is ongoing debate in the U.S. about the best approach to healthcare reform."
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "Healthcare System",
    "section": "Introduction",
    "text": "Introduction\n\nIn the complex landscape of global healthcare, the United States stands as a unique case study, often due to its high healthcare spending paired with varied outcomes. This introduction seeks to compare the U.S. healthcare system with those of other countries around the world, offering insights into how different nations manage health care delivery, finance, and policy to achieve diverse health outcomes.\nAfter reading the previous edition of U.S. Health Care from a Global Perspective, we found that people in the United States experience the worst health outcomes overall of any high-income nation. Americans are more likely to die younger, and from avoidable causes, than residents of peer countries.\nTo explore this topic further, we aim to answer the following data science questions:"
  },
  {
    "objectID": "index.html#questions",
    "href": "index.html#questions",
    "title": "Healthcare System",
    "section": "Questions",
    "text": "Questions\nWhat is the Healthcare expenditure and life expectancy like Globally?\nWhat is the insurance coverage type different Globally?\nWhat is the Heathcare coverage like in the US?"
  },
  {
    "objectID": "Globally.html",
    "href": "Globally.html",
    "title": "Heathcare Coverage Globally",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\nimport plotly.io as pio\npio.renderers.default = 'notebook'\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Load expectancy and expenditure data from CSV files\nexpectancy_data = pd.read_csv('../data/expectancy.csv')\nexpenditure_data = pd.read_csv('../data/expenditure.csv')\n\n# data cleaning and preprocessing\n#only keep,Variable,Country,Year,Value\nexpectancy_data = expectancy_data[['Country', 'Year', 'Value', 'Variable']]\n# save the data to a csv file\n# reaname value to life expectancy\nexpectancy_data = expectancy_data.rename(columns={'Value': 'Life expectancy'})\n# choose year from 2015 to 2022\nexpectancy_data = expectancy_data[expectancy_data['Year'] &gt;= 2015]\n# only choose rows 'Total population at birth'\nexpectancy_data = expectancy_data[expectancy_data['Variable'] == 'Total population at birth']\n# drop the Variable column\nexpectancy_data = expectancy_data.drop(columns=['Variable'])\n\n#only keep \"Measure\",\"Country\",\"Year\",\"Value\"\nexpenditure_data = expenditure_data[['Country', 'Year', 'Value', 'Measure']]\n# rename value to ''percent of GDP spent on health\"\nexpenditure_data = expenditure_data.rename(columns={'Value': 'Percent of GDP spent on health'})\n# only choose the rows with \"Share of gross domestic product (%)\"\nexpenditure_data = expenditure_data[expenditure_data['Measure'] == 'Share of gross domestic product']\n# drop the Measure column\nexpenditure_data = expenditure_data.drop(columns=['Measure'])\n\n# merge the two dataframes\nmerged_data = pd.merge(expectancy_data, expenditure_data, on=['Country', 'Year'])\n\n# filter the data to only incllude the top 15 OECD countries based on gdp percapita\noecd_countries = [\n    \"Luxembourg\", \"Switzerland\", \"Ireland\", \"Norway\", \"Iceland\", \n    \"United States\", \"Denmark\", \"Netherlands\", \"Australia\", \"Sweden\", \n    \"Germany\", \"Finland\", \"United Kingdom\", \"Canada\", \"France\"\n]\ndata = merged_data[merged_data['Country'].isin(oecd_countries)]\n\n\n\n\nCode\nimport geopandas as gpd\nimport pandas as pd\nimport plotly.graph_objs as go\nimport dash\nfrom dash import dcc, html\nfrom dash.dependencies import Input, Output\nimport pycountry\n\nhealthcare_df = pd.read_csv('../data/healthcare_coverage.csv')\nlife_df = pd.read_csv('../data/life-expectancy.csv')\n\n#handle null vals with interpolation\nhealthcare_df = healthcare_df.apply(pd.to_numeric, errors='coerce')\nhealthcare_df.interpolate(method='linear', limit_direction='forward', axis=0, inplace=True)\n#converting to long format\ndf_long_healthcare = healthcare_df.melt(id_vars=['Year'], var_name='Country', value_name='HealthcareCoverage')\ndf_long_healthcare['Country'] = df_long_healthcare['Country'].str.split(':').str[0].str.strip()\n \n#handle null vals with backward fill\nlife_df = life_df.apply(pd.to_numeric, errors='coerce')\nlife_df.fillna(method='bfill', inplace=True)\n#converting to long format\ndf_long_life = life_df.melt(id_vars=['Year'], var_name='Country', value_name='LifeExpectancy')\ndf_long_life['Country'] = df_long_healthcare['Country'].str.split(':').str[0].str.strip()\n\n#creating dash app\napp = dash.Dash(__name__)\n\n#calculating y-axis limits\nhealthcare_min = df_long_healthcare['HealthcareCoverage'].min()\nhealthcare_max = df_long_healthcare['HealthcareCoverage'].max()\nlife_expectancy_min = df_long_life['LifeExpectancy'].min()\nlife_expectancy_max = df_long_life['LifeExpectancy'].max()\n\n#map countries for flag addition later\ncountry_map = {\n    'AUS': 'Australia',\n    'CAN': 'Canada',\n    'FRA': 'France',\n    'GER': 'Germany',\n    'JPN': 'Japan',\n    'KOR': 'Korea, Republic of',\n    'NETH': 'Netherlands',\n    'NZ': 'New Zealand',\n    'NOR': 'Norway',\n    'SWE': 'Sweden',\n    'SWIZ': 'Switzerland',\n    'UK': 'United Kingdom',\n    'US': 'United States'\n}\n\n#replace country names with mapping names\ndf_long_healthcare['Country'] = df_long_healthcare['Country'].replace(country_map)\ndf_long_life['Country'] = df_long_life['Country'].replace(country_map)\n\ncountry_options = []\nfor country in df_long_healthcare['Country'].unique():\n    country_obj = pycountry.countries.get(name=country)\n    if country_obj:\n        country_options.append({'label': f\"{country} ({country_obj.alpha_2})\", 'value': country})\n    else:\n        print(f\"Country not found: {country}\")\n\n#adding dropdown menus\napp.layout = html.Div([\n    dcc.Dropdown(\n        id='topic-dropdown',\n        options=[\n            {'label': 'Healthcare Coverage', 'value': 'HealthcareCoverage'},\n            {'label': 'Life Expectancy', 'value': 'LifeExpectancy'}\n        ],\n        value='HealthcareCoverage',\n        clearable=False\n    ),\n    dcc.Dropdown(\n        id='country-dropdown',\n        options=[{'label': 'All Countries', 'value': 'All'}] +\n                [{'label': f\"{country} ({pycountry.countries.get(name=country).alpha_2})\", 'value': country} for country in df_long_healthcare['Country'].unique()],\n        value='All',\n        clearable=False\n    ),\n    dcc.Dropdown(\n        id='scale-dropdown',\n        options=[\n            {'label': 'Linear', 'value': 'linear'},\n            {'label': 'Logarithmic', 'value': 'log'}\n        ],\n        value='linear',\n        clearable=False\n    ),\n    dcc.Graph(id='global-health-graph')\n])\n\n#adding flags\ndef country_to_flag(country):\n    try:\n        country_obj = pycountry.countries.get(name=country)\n        if country_obj:\n            return ''.join(chr(0x1F1E6 + ord(c) - ord('A')) for c in country_obj.alpha_2)\n        else:\n            return ''\n    except Exception as e:\n        print(f\"Error converting country to flag for {country}: {str(e)}\")\n        return ''\n\n@app.callback(\n    Output('global-health-graph', 'figure'),\n    [Input('country-dropdown', 'value'),\n     Input('topic-dropdown', 'value'),\n     Input('scale-dropdown', 'value'),\n     Input('global-health-graph', 'hoverData')]\n)\n\n#topic selection\ndef update_figure(selected_country, selected_topic, selected_scale, hoverData):\n    if selected_topic == 'LifeExpectancy':\n        data_df = df_long_life\n        y_axis_title = 'LifeExpectancy'\n        top_title = 'Life Expectancy'\n        axis_label = 'Life Expectancy'\n    else:\n        data_df = df_long_healthcare\n        y_axis_title = 'HealthcareCoverage'\n        top_title = 'Healthcare Coverage'\n        axis_label = 'Healthcare Coverage (Percentage of GDP)'\n\n    fig = go.Figure()\n\n    if selected_country == 'All':\n        title_text = f'{top_title} Trends - All Countries'\n        for i, country in enumerate(data_df['Country'].unique()):\n            df_country = data_df[data_df['Country'] == country]\n            is_hovered = hoverData and i == hoverData['points'][0]['curveNumber']\n            opacity, line_width = (1.0, 6) if is_hovered else (0.3, 2)\n            fig.add_trace(go.Scatter(\n                x=df_country['Year'],\n                y=df_country[y_axis_title],\n                mode='lines+markers',\n                name=country,\n                line=dict(width=line_width),\n                opacity=opacity,\n                hoverinfo='all',\n                hovertemplate=f\"{country_to_flag(country)} {country}&lt;br&gt;Year: %{{x}}\"\n            ))\n    else:\n        title_text = f'{top_title} Trends - {selected_country}'\n        df_country = data_df[data_df['Country'] == selected_country]\n        fig.add_trace(go.Scatter(\n            x=df_country['Year'],\n            y=df_country[y_axis_title],\n            mode='lines+markers',\n            name=selected_country,\n            line=dict(width=2),\n            opacity=1.0,\n            hoverinfo='all',\n            hovertemplate=f\"{country_to_flag(selected_country)} {selected_country}&lt;br&gt;Year: %{{x}}\"\n        ))\n\n    fig.update_layout(\n        title=title_text,\n        xaxis_title='Year',\n        yaxis=dict(\n            title=y_axis_title,\n            type=selected_scale,\n            range=[data_df[y_axis_title].min(), data_df[y_axis_title].max()] if selected_scale == 'linear' else [None, None]\n        ),\n        hovermode='closest'\n    )\n\n    return fig\n\nif __name__ == '__main__':\n    app.run_server(debug=True, port = 8023)\n\n\n\n\n\n        \n        \n\n\nFigure 1: Line Chart of Life Expectancy Across Countries and Years\n\n\n\n\nThis visualization represents the percentage of selected countries’ GDPs used for healthcare coverage ranging from years 1980-2021. All countries experienced a steady increase in expenditures devoted to healthcare since 1980, which can be credited to a combination of medical advancements, and increasing healthcare costs and demand. Notably, significant increases in healthcare spending were also seen in 2020 due to COVID-19. While spending has decreased gradually since then, the levels are still higher than historic records.\n\n\nCode\nimport plotly.graph_objects as go\nimport pandas as pd\n\n# Group the data by 'Country', calculate the mean health expenditure, and select the top 15\ntop_countries = data.groupby('Country')['Percent of GDP spent on health'].mean().nlargest(15).index\n\n# Now, you can use this list of top countries to filter your main dataset\ntop_countries_data = data[data['Country'].isin(top_countries)]\n\n\n# Assume data is already loaded and top_countries_data is available\n# Pivot the data to get life expectancy for each country across different years\npivot_table_data = top_countries_data.pivot_table(index='Country', columns='Year', values='Life expectancy', aggfunc='mean')\n\n# Create the heatmap using Plotly's Graph Objects\nfig_heatmap_fixed = go.Figure(data=go.Heatmap(\n    z=pivot_table_data.values,  # Values to be plotted, life expectancy values\n    x=pivot_table_data.columns,  # Years as the columns\n    y=pivot_table_data.index,  # Countries as the rows\n    colorscale='Viridis'  # Color scale for the heatmap\n))\n\n# Update the layout to add titles and axis labels\nfig_heatmap_fixed.update_layout(\n    title='Heatmap of Life Expectancy Across Countries and Years',\n    xaxis_title='Year',\n    yaxis_title='Country'\n);\n\nfig_heatmap_fixed.show()\n\n\n\n\n                                                \n\n\nFigure 2: Heatmap of Life Expectancy Across Countries and Years\n\n\n\n\nThe life expectancy across the countries listed has generally been high over the years, mostly within the range of 80 to 84 years, Japan consistently shows one of the highest life expectancies throughout the years, while the the United States seems to have a lower life expectancy compared to other high-income countries above, for example, while life expextancy in japan is 84.5 years, Us has a life expectancy of 76.4 years in 2021, which is the lowest among the countries listed.\n\n\n\n\nCode\nimport dash\nfrom dash import html, dcc, Input, Output\nimport plotly.express as px\nimport pandas as pd\n\n# Initialize the Dash app\napp2 = dash.Dash(__name__)\n\n# Filter the data to only include the year 2020 and sort it in descending order by 'Percent of GDP spent on health'\ndata_2020 = data[data['Year'] == 2020].sort_values(by='Percent of GDP spent on health', ascending=False)\n\n# Apply a color condition that highlights the United States\ndata_2020['Color'] = data_2020['Country'].apply(lambda x: 'USA' if x == 'United States' else 'Other')\n\n# Create a bar chart for the filtered and sorted data\nfig_gdp = px.bar(data_2020, x='Country', y='Percent of GDP spent on health',\n                 title='Percent of GDP Spent on Health by Country in 2020',\n                 labels={'Percent of GDP spent on health': 'Percent of GDP', 'Country': 'Country'},\n                 hover_data=['Country'], color='Color',\n                 color_discrete_map={'USA': '#FF4136', 'Other': '#0074D9'})\n\n# App layout with two graph components\napp2.layout = html.Div([\n    dcc.Graph(id='gdp-health-plot', figure=fig_gdp),\n    dcc.Graph(id='life-expectancy-plot')\n])\n\n# Callback to update life expectancy plot based on selected country in the GDP plot\n@app2.callback(\n    Output('life-expectancy-plot', 'figure'),\n    Input('gdp-health-plot', 'clickData')\n)\ndef display_life_expectancy(clickData):\n    if clickData is None:\n        # Default to first country's data if none is clicked\n        country = data_2020['Country'].iloc[0]\n    else:\n        country = clickData['points'][0]['x']\n\n    # Filter data for the selected country across all years and plot\n    df_filtered = data[data['Country'] == country]\n    fig_life = px.line(df_filtered, x='Year', y='Life expectancy', title=f'Life Expectancy in {country} Over the Years',\n                       labels={'Year': 'Year', 'Life expectancy': 'Life Expectancy (Years)'})\n    return fig_life.update_layout(template='plotly_dark')  # Change template here\n\n# Running the server\nif __name__ == '__main__':\n    app2.run_server(debug=True, port=8058)\n\n\n\n\n\n        \n        \n\n\nFigure 3: GDP Spent on Health by Country in 2020\n\n\n\n\nLinked plots which shows a more in-depth analysis of the relationship between health care spending and life expectancy, in 2020, the life expectancy of all countries listed decreased, which may be due to the COVID-19 pandemic.\n\n\n\n\n\nCode\nimport pandas as pd\nimport plotly.express as px\n\ndata['custom_size'] = 10  # Default size for all countries\ndata['custom_color'] = data['Country']  # Default color by country name\n\n# Make the United States stand out\nus_highlight = {\n    'size': 15,\n    'color': 'red'\n}\n\n# Update the data for the United States\ndata.loc[data['Country'] == 'United States', 'custom_size'] = us_highlight['size']\ndata['custom_color'] = data['custom_color'].replace('United States', us_highlight['color'])\n\n# Create the scatter plot with custom attributes for consistent styling\nfig = px.scatter(data, \n                 x=\"Percent of GDP spent on health\", \n                 y=\"Life expectancy\", \n                 color=\"custom_color\", \n                 size=\"custom_size\", \n                 hover_name=\"Country\", \n                 animation_frame=\"Year\",\n                 title=\"Relationship between Life Expectancy and Healthcare Spending\",\n                 labels={\"Percent of GDP spent on health\": \"Percent of GDP Spent on Health\",\n                         \"Life expectancy\": \"Life Expectancy (Years)\"},\n                 size_max=us_highlight['size'],\n                 template=\"plotly_dark\",\n                 color_discrete_map={us_highlight['color']: us_highlight['color']})\n\n# Enhance tooltip with additional details\nfig.update_traces(marker=dict(line=dict(width=2, color='DarkSlateGrey')),\n                  hovertemplate='&lt;b&gt;%{hovertext}&lt;/b&gt;&lt;br&gt;Life Expectancy: %{y}&lt;br&gt;% GDP Spent on Health: %{x}&lt;extra&gt;&lt;/extra&gt;');\n\n# Show the plot\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 4: Relationship between Life Expectancy and Healthcare Spending\n\n\n\n\nThis plot is more obvious that US is an outlier in terms of healthcare spending and life expectancy.\nIn summary, Despite the highest healthcare spending as a percentage of GDP in the U.S., life expectancy the life expectancy is not ideal compared to other high-income countries. Other peer high income countries are achieving better health outcomes with less expenditure, it may relates to Healthcare System Efficiency, Lifestyle Factors and health insurance coverage….\nMany high-income countries with higher life expectancies have universal or near-universal health coverage, ensuring that all citizens have access to healthcare. In contrast, the U.S. has a higher percentage of uninsured individuals, which can lead to delays in seeking treatment, resulting in worse health outcomes."
  },
  {
    "objectID": "Globally.html#health-care-spending-and-life-expectancy-globally",
    "href": "Globally.html#health-care-spending-and-life-expectancy-globally",
    "title": "Heathcare Coverage Globally",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\nimport plotly.io as pio\npio.renderers.default = 'notebook'\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Load expectancy and expenditure data from CSV files\nexpectancy_data = pd.read_csv('../data/expectancy.csv')\nexpenditure_data = pd.read_csv('../data/expenditure.csv')\n\n# data cleaning and preprocessing\n#only keep,Variable,Country,Year,Value\nexpectancy_data = expectancy_data[['Country', 'Year', 'Value', 'Variable']]\n# save the data to a csv file\n# reaname value to life expectancy\nexpectancy_data = expectancy_data.rename(columns={'Value': 'Life expectancy'})\n# choose year from 2015 to 2022\nexpectancy_data = expectancy_data[expectancy_data['Year'] &gt;= 2015]\n# only choose rows 'Total population at birth'\nexpectancy_data = expectancy_data[expectancy_data['Variable'] == 'Total population at birth']\n# drop the Variable column\nexpectancy_data = expectancy_data.drop(columns=['Variable'])\n\n#only keep \"Measure\",\"Country\",\"Year\",\"Value\"\nexpenditure_data = expenditure_data[['Country', 'Year', 'Value', 'Measure']]\n# rename value to ''percent of GDP spent on health\"\nexpenditure_data = expenditure_data.rename(columns={'Value': 'Percent of GDP spent on health'})\n# only choose the rows with \"Share of gross domestic product (%)\"\nexpenditure_data = expenditure_data[expenditure_data['Measure'] == 'Share of gross domestic product']\n# drop the Measure column\nexpenditure_data = expenditure_data.drop(columns=['Measure'])\n\n# merge the two dataframes\nmerged_data = pd.merge(expectancy_data, expenditure_data, on=['Country', 'Year'])\n\n# filter the data to only incllude the top 15 OECD countries based on gdp percapita\noecd_countries = [\n    \"Luxembourg\", \"Switzerland\", \"Ireland\", \"Norway\", \"Iceland\", \n    \"United States\", \"Denmark\", \"Netherlands\", \"Australia\", \"Sweden\", \n    \"Germany\", \"Finland\", \"United Kingdom\", \"Canada\", \"France\"\n]\ndata = merged_data[merged_data['Country'].isin(oecd_countries)]\n\n\n\n\nCode\nimport geopandas as gpd\nimport pandas as pd\nimport plotly.graph_objs as go\nimport dash\nfrom dash import dcc, html\nfrom dash.dependencies import Input, Output\nimport pycountry\n\nhealthcare_df = pd.read_csv('../data/healthcare_coverage.csv')\nlife_df = pd.read_csv('../data/life-expectancy.csv')\n\n#handle null vals with interpolation\nhealthcare_df = healthcare_df.apply(pd.to_numeric, errors='coerce')\nhealthcare_df.interpolate(method='linear', limit_direction='forward', axis=0, inplace=True)\n#converting to long format\ndf_long_healthcare = healthcare_df.melt(id_vars=['Year'], var_name='Country', value_name='HealthcareCoverage')\ndf_long_healthcare['Country'] = df_long_healthcare['Country'].str.split(':').str[0].str.strip()\n \n#handle null vals with backward fill\nlife_df = life_df.apply(pd.to_numeric, errors='coerce')\nlife_df.fillna(method='bfill', inplace=True)\n#converting to long format\ndf_long_life = life_df.melt(id_vars=['Year'], var_name='Country', value_name='LifeExpectancy')\ndf_long_life['Country'] = df_long_healthcare['Country'].str.split(':').str[0].str.strip()\n\n#creating dash app\napp = dash.Dash(__name__)\n\n#calculating y-axis limits\nhealthcare_min = df_long_healthcare['HealthcareCoverage'].min()\nhealthcare_max = df_long_healthcare['HealthcareCoverage'].max()\nlife_expectancy_min = df_long_life['LifeExpectancy'].min()\nlife_expectancy_max = df_long_life['LifeExpectancy'].max()\n\n#map countries for flag addition later\ncountry_map = {\n    'AUS': 'Australia',\n    'CAN': 'Canada',\n    'FRA': 'France',\n    'GER': 'Germany',\n    'JPN': 'Japan',\n    'KOR': 'Korea, Republic of',\n    'NETH': 'Netherlands',\n    'NZ': 'New Zealand',\n    'NOR': 'Norway',\n    'SWE': 'Sweden',\n    'SWIZ': 'Switzerland',\n    'UK': 'United Kingdom',\n    'US': 'United States'\n}\n\n#replace country names with mapping names\ndf_long_healthcare['Country'] = df_long_healthcare['Country'].replace(country_map)\ndf_long_life['Country'] = df_long_life['Country'].replace(country_map)\n\ncountry_options = []\nfor country in df_long_healthcare['Country'].unique():\n    country_obj = pycountry.countries.get(name=country)\n    if country_obj:\n        country_options.append({'label': f\"{country} ({country_obj.alpha_2})\", 'value': country})\n    else:\n        print(f\"Country not found: {country}\")\n\n#adding dropdown menus\napp.layout = html.Div([\n    dcc.Dropdown(\n        id='topic-dropdown',\n        options=[\n            {'label': 'Healthcare Coverage', 'value': 'HealthcareCoverage'},\n            {'label': 'Life Expectancy', 'value': 'LifeExpectancy'}\n        ],\n        value='HealthcareCoverage',\n        clearable=False\n    ),\n    dcc.Dropdown(\n        id='country-dropdown',\n        options=[{'label': 'All Countries', 'value': 'All'}] +\n                [{'label': f\"{country} ({pycountry.countries.get(name=country).alpha_2})\", 'value': country} for country in df_long_healthcare['Country'].unique()],\n        value='All',\n        clearable=False\n    ),\n    dcc.Dropdown(\n        id='scale-dropdown',\n        options=[\n            {'label': 'Linear', 'value': 'linear'},\n            {'label': 'Logarithmic', 'value': 'log'}\n        ],\n        value='linear',\n        clearable=False\n    ),\n    dcc.Graph(id='global-health-graph')\n])\n\n#adding flags\ndef country_to_flag(country):\n    try:\n        country_obj = pycountry.countries.get(name=country)\n        if country_obj:\n            return ''.join(chr(0x1F1E6 + ord(c) - ord('A')) for c in country_obj.alpha_2)\n        else:\n            return ''\n    except Exception as e:\n        print(f\"Error converting country to flag for {country}: {str(e)}\")\n        return ''\n\n@app.callback(\n    Output('global-health-graph', 'figure'),\n    [Input('country-dropdown', 'value'),\n     Input('topic-dropdown', 'value'),\n     Input('scale-dropdown', 'value'),\n     Input('global-health-graph', 'hoverData')]\n)\n\n#topic selection\ndef update_figure(selected_country, selected_topic, selected_scale, hoverData):\n    if selected_topic == 'LifeExpectancy':\n        data_df = df_long_life\n        y_axis_title = 'LifeExpectancy'\n        top_title = 'Life Expectancy'\n        axis_label = 'Life Expectancy'\n    else:\n        data_df = df_long_healthcare\n        y_axis_title = 'HealthcareCoverage'\n        top_title = 'Healthcare Coverage'\n        axis_label = 'Healthcare Coverage (Percentage of GDP)'\n\n    fig = go.Figure()\n\n    if selected_country == 'All':\n        title_text = f'{top_title} Trends - All Countries'\n        for i, country in enumerate(data_df['Country'].unique()):\n            df_country = data_df[data_df['Country'] == country]\n            is_hovered = hoverData and i == hoverData['points'][0]['curveNumber']\n            opacity, line_width = (1.0, 6) if is_hovered else (0.3, 2)\n            fig.add_trace(go.Scatter(\n                x=df_country['Year'],\n                y=df_country[y_axis_title],\n                mode='lines+markers',\n                name=country,\n                line=dict(width=line_width),\n                opacity=opacity,\n                hoverinfo='all',\n                hovertemplate=f\"{country_to_flag(country)} {country}&lt;br&gt;Year: %{{x}}\"\n            ))\n    else:\n        title_text = f'{top_title} Trends - {selected_country}'\n        df_country = data_df[data_df['Country'] == selected_country]\n        fig.add_trace(go.Scatter(\n            x=df_country['Year'],\n            y=df_country[y_axis_title],\n            mode='lines+markers',\n            name=selected_country,\n            line=dict(width=2),\n            opacity=1.0,\n            hoverinfo='all',\n            hovertemplate=f\"{country_to_flag(selected_country)} {selected_country}&lt;br&gt;Year: %{{x}}\"\n        ))\n\n    fig.update_layout(\n        title=title_text,\n        xaxis_title='Year',\n        yaxis=dict(\n            title=y_axis_title,\n            type=selected_scale,\n            range=[data_df[y_axis_title].min(), data_df[y_axis_title].max()] if selected_scale == 'linear' else [None, None]\n        ),\n        hovermode='closest'\n    )\n\n    return fig\n\nif __name__ == '__main__':\n    app.run_server(debug=True, port = 8023)\n\n\n\n\n\n        \n        \n\n\nFigure 1: Line Chart of Life Expectancy Across Countries and Years\n\n\n\n\nThis visualization represents the percentage of selected countries’ GDPs used for healthcare coverage ranging from years 1980-2021. All countries experienced a steady increase in expenditures devoted to healthcare since 1980, which can be credited to a combination of medical advancements, and increasing healthcare costs and demand. Notably, significant increases in healthcare spending were also seen in 2020 due to COVID-19. While spending has decreased gradually since then, the levels are still higher than historic records.\n\n\nCode\nimport plotly.graph_objects as go\nimport pandas as pd\n\n# Group the data by 'Country', calculate the mean health expenditure, and select the top 15\ntop_countries = data.groupby('Country')['Percent of GDP spent on health'].mean().nlargest(15).index\n\n# Now, you can use this list of top countries to filter your main dataset\ntop_countries_data = data[data['Country'].isin(top_countries)]\n\n\n# Assume data is already loaded and top_countries_data is available\n# Pivot the data to get life expectancy for each country across different years\npivot_table_data = top_countries_data.pivot_table(index='Country', columns='Year', values='Life expectancy', aggfunc='mean')\n\n# Create the heatmap using Plotly's Graph Objects\nfig_heatmap_fixed = go.Figure(data=go.Heatmap(\n    z=pivot_table_data.values,  # Values to be plotted, life expectancy values\n    x=pivot_table_data.columns,  # Years as the columns\n    y=pivot_table_data.index,  # Countries as the rows\n    colorscale='Viridis'  # Color scale for the heatmap\n))\n\n# Update the layout to add titles and axis labels\nfig_heatmap_fixed.update_layout(\n    title='Heatmap of Life Expectancy Across Countries and Years',\n    xaxis_title='Year',\n    yaxis_title='Country'\n);\n\nfig_heatmap_fixed.show()\n\n\n\n\n                                                \n\n\nFigure 2: Heatmap of Life Expectancy Across Countries and Years\n\n\n\n\nThe life expectancy across the countries listed has generally been high over the years, mostly within the range of 80 to 84 years, Japan consistently shows one of the highest life expectancies throughout the years, while the the United States seems to have a lower life expectancy compared to other high-income countries above, for example, while life expextancy in japan is 84.5 years, Us has a life expectancy of 76.4 years in 2021, which is the lowest among the countries listed.\n\n\n\n\nCode\nimport dash\nfrom dash import html, dcc, Input, Output\nimport plotly.express as px\nimport pandas as pd\n\n# Initialize the Dash app\napp2 = dash.Dash(__name__)\n\n# Filter the data to only include the year 2020 and sort it in descending order by 'Percent of GDP spent on health'\ndata_2020 = data[data['Year'] == 2020].sort_values(by='Percent of GDP spent on health', ascending=False)\n\n# Apply a color condition that highlights the United States\ndata_2020['Color'] = data_2020['Country'].apply(lambda x: 'USA' if x == 'United States' else 'Other')\n\n# Create a bar chart for the filtered and sorted data\nfig_gdp = px.bar(data_2020, x='Country', y='Percent of GDP spent on health',\n                 title='Percent of GDP Spent on Health by Country in 2020',\n                 labels={'Percent of GDP spent on health': 'Percent of GDP', 'Country': 'Country'},\n                 hover_data=['Country'], color='Color',\n                 color_discrete_map={'USA': '#FF4136', 'Other': '#0074D9'})\n\n# App layout with two graph components\napp2.layout = html.Div([\n    dcc.Graph(id='gdp-health-plot', figure=fig_gdp),\n    dcc.Graph(id='life-expectancy-plot')\n])\n\n# Callback to update life expectancy plot based on selected country in the GDP plot\n@app2.callback(\n    Output('life-expectancy-plot', 'figure'),\n    Input('gdp-health-plot', 'clickData')\n)\ndef display_life_expectancy(clickData):\n    if clickData is None:\n        # Default to first country's data if none is clicked\n        country = data_2020['Country'].iloc[0]\n    else:\n        country = clickData['points'][0]['x']\n\n    # Filter data for the selected country across all years and plot\n    df_filtered = data[data['Country'] == country]\n    fig_life = px.line(df_filtered, x='Year', y='Life expectancy', title=f'Life Expectancy in {country} Over the Years',\n                       labels={'Year': 'Year', 'Life expectancy': 'Life Expectancy (Years)'})\n    return fig_life.update_layout(template='plotly_dark')  # Change template here\n\n# Running the server\nif __name__ == '__main__':\n    app2.run_server(debug=True, port=8058)\n\n\n\n\n\n        \n        \n\n\nFigure 3: GDP Spent on Health by Country in 2020\n\n\n\n\nLinked plots which shows a more in-depth analysis of the relationship between health care spending and life expectancy, in 2020, the life expectancy of all countries listed decreased, which may be due to the COVID-19 pandemic.\n\n\n\n\n\nCode\nimport pandas as pd\nimport plotly.express as px\n\ndata['custom_size'] = 10  # Default size for all countries\ndata['custom_color'] = data['Country']  # Default color by country name\n\n# Make the United States stand out\nus_highlight = {\n    'size': 15,\n    'color': 'red'\n}\n\n# Update the data for the United States\ndata.loc[data['Country'] == 'United States', 'custom_size'] = us_highlight['size']\ndata['custom_color'] = data['custom_color'].replace('United States', us_highlight['color'])\n\n# Create the scatter plot with custom attributes for consistent styling\nfig = px.scatter(data, \n                 x=\"Percent of GDP spent on health\", \n                 y=\"Life expectancy\", \n                 color=\"custom_color\", \n                 size=\"custom_size\", \n                 hover_name=\"Country\", \n                 animation_frame=\"Year\",\n                 title=\"Relationship between Life Expectancy and Healthcare Spending\",\n                 labels={\"Percent of GDP spent on health\": \"Percent of GDP Spent on Health\",\n                         \"Life expectancy\": \"Life Expectancy (Years)\"},\n                 size_max=us_highlight['size'],\n                 template=\"plotly_dark\",\n                 color_discrete_map={us_highlight['color']: us_highlight['color']})\n\n# Enhance tooltip with additional details\nfig.update_traces(marker=dict(line=dict(width=2, color='DarkSlateGrey')),\n                  hovertemplate='&lt;b&gt;%{hovertext}&lt;/b&gt;&lt;br&gt;Life Expectancy: %{y}&lt;br&gt;% GDP Spent on Health: %{x}&lt;extra&gt;&lt;/extra&gt;');\n\n# Show the plot\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 4: Relationship between Life Expectancy and Healthcare Spending\n\n\n\n\nThis plot is more obvious that US is an outlier in terms of healthcare spending and life expectancy.\nIn summary, Despite the highest healthcare spending as a percentage of GDP in the U.S., life expectancy the life expectancy is not ideal compared to other high-income countries. Other peer high income countries are achieving better health outcomes with less expenditure, it may relates to Healthcare System Efficiency, Lifestyle Factors and health insurance coverage….\nMany high-income countries with higher life expectancies have universal or near-universal health coverage, ensuring that all citizens have access to healthcare. In contrast, the U.S. has a higher percentage of uninsured individuals, which can lead to delays in seeking treatment, resulting in worse health outcomes."
  },
  {
    "objectID": "Globally.html#health-insurance-coverage-comparison-globally",
    "href": "Globally.html#health-insurance-coverage-comparison-globally",
    "title": "Heathcare Coverage Globally",
    "section": "Health Insurance Coverage comparison globally",
    "text": "Health Insurance Coverage comparison globally\nVisulize Government/compulsory insrance coverage acorss top 15 contries based on the gdp per capita using boxplot acorss different years.\n\n\nCode\ninurance_data = pd.read_csv('../data/insurance.csv')\n# print(inurance_data.head())\n\n# print unique values in the 'Variable' column\n# print(inurance_data['Variable'].unique())\n\n# only keep rows with ' 'Government/compulsory health insurance coverage' and 'Total voluntary health insurance (VHI) coverage'\ninurance_data = inurance_data[inurance_data['Variable'].isin(['Government/compulsory health insurance coverage', 'Total voluntary health insurance (VHI) coverage'])]\n# print(inurance_data.head())\n# print(inurance_data.shape)\n\n# drop the 'VAR' column,Unit,COU,YEA,Flag Codes,Flags\ninurance_data = inurance_data.drop(columns=['VAR', 'UNIT', 'COU', 'YEA', 'Flag Codes', 'Flags'])\n# print(inurance_data.head())\n# print(inurance_data['Measure'].unique())\n\n\n# pivot the data\npivot_table_data = inurance_data.pivot_table(index=['Country', 'Year','Variable'], columns='Measure', values='Value', aggfunc='mean').reset_index()\n# print(pivot_table_data.head())\n\n\npivot_table_data = pivot_table_data.dropna()\n# print(pivot_table_data.shape)\n# print(pivot_table_data['Country'].unique())\n# rename  the column'Varible' to 'Insurance Type'\npivot_table_data = pivot_table_data.rename(columns={'Variable': 'Insurance Type'})\n\ninsurance_data = pivot_table_data\n\ntop_15_countries_gdp_per_capita = [\n    \"Luxembourg\", \"Switzerland\", \"Ireland\", \"Norway\", \"Iceland\", \n    \"United States\", \"Denmark\", \"Netherlands\", \"Australia\", \"Sweden\", \n    \"Germany\", \"Finland\", \"United Kingdom\", \"Canada\", \"France\"\n]\n\n# Filter your data to include only these top 15 countries\ninsurance_data = insurance_data[insurance_data['Country'].isin(top_countries)]\n\n\n\nGovernment/compulsory Insurance Coverage Across All Countries\n\n\nCode\nimport dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nimport plotly.graph_objects as go\nimport numpy as np\nimport pandas as pd\nfrom dash.dependencies import Input, Output\n\n\n# filter only the rows with 'Government/compulsory health insurance coverage'\ninsurance_data_1 = insurance_data[insurance_data['Insurance Type'] == 'Government/compulsory health insurance coverage']\n\n# Generate a rainbow color array based on the number of unique countries\nunique_countries = insurance_data_1['Country'].unique()\ncolors = ['hsl('+str(h)+',75%'+',50%)' for h in np.linspace(0, 360, len(unique_countries))]\n\napp3 = dash.Dash(__name__)\n\napp3.layout = html.Div([\n    dcc.Graph(id='box-plot')\n])\n\n@app3.callback(\n    Output('box-plot', 'figure'),\n    Input('box-plot', 'id')\n)\ndef update_box_plot(_):\n    # Create the box plot\n    fig = go.Figure()\n    for i, country in enumerate(unique_countries):\n        country_data = insurance_data_1[insurance_data_1['Country'] == country]\n        fig.add_trace(go.Box(\n            y=country_data['% of total population'],\n            name=country,\n            marker_color=colors[i],\n            hoverinfo='all',\n            hovertext=country_data.apply(lambda row: f\"Thousands of Persons: {row['Thousands of persons']}, Year: {row['Year']}\", axis=1)\n        ))\n\n    # Update the layout to add title and remove grid lines\n    fig.update_layout(\n        title='Distribution of Government/compulsory Insurance Coverage by Country Across All Years',\n        yaxis=dict(title='% of Total Population', showgrid=False, zeroline=False),\n        xaxis=dict(title='Country'),\n        paper_bgcolor='rgb(233,233,233)',\n        plot_bgcolor='rgb(233,233,233)',\n        showlegend=True\n    )\n    \n    return fig\n\nif __name__ == '__main__':\n    app3.run_server(debug=True, port=8059)\n\n\n\n\n\n        \n        \n\n\nFigure 5: Distribution of Government/compulsory Insurance Coverage by Country Across All Years\n\n\n\n\nso most countries have a single line, suggesting no variation in the data recorded for them, which might indicate consistently full coverage of public insurance in the data for these countries, while US has a median of 35% of the population covered by public insurance.\n\n\nInsurance Coverage by Country and Type\n\n\nCode\nimport plotly.express as px\nimport pandas as pd\n\n# Calculate the average insurance coverage for each country and type\naverage_coverage = insurance_data.groupby(['Country', 'Insurance Type'])['% of total population'].mean().reset_index()\n\n# Creating the grouped bar chart with a better color palette and layout\nfig = px.bar(average_coverage, x='Country', y='% of total population', color='Insurance Type',\n             title='Average Insurance Coverage by Country and Type',\n             barmode='stack',\n             labels={'% of total population': 'Average Coverage (%)'},\n             hover_data={'Country': True, 'Insurance Type': True, '% of total population': ':.2f'},\n             color_discrete_map={\"Public\": \"#636EFA\", \"Voluntary\": \"#EF553B\", \"Other\": \"#00CC96\"})  # Custom colors for clarity\n\n# Customizing the layout\nfig.update_layout(\n    xaxis_title=\"Country\",\n    yaxis_title=\"Average Coverage (%)\",\n    plot_bgcolor='rgb(243, 243, 243)',\n    showlegend=True,\n    legend_title_text='Insurance Type',\n    font=dict(family=\"Helvetica, Arial, sans-serif\", size=12, color=\"RebeccaPurple\"),\n    paper_bgcolor='rgb(255, 255, 255)',  # white background color\n    xaxis_tickangle=-45,  \n    yaxis=dict(\n        titlefont_size=16,\n        tickfont_size=14,\n        gridcolor='lightgrey'  \n    )\n);\n\nfig.update_traces(marker_line_color='rgb(8,48,107)',\n                  marker_line_width=1.5, opacity=0.6);\n\n# Show the figure\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 6: Average Insurance Coverage by Country and Type\n\n\n\n\nStacked bar chart showing the percentage of the population covered by public insurance and voluntary health insurance in the top 15 countries based on GDP. For most countries, the government/compulsory health insurance coverage (indicated by the purple bars) forms the majority of the insurance coverage. The United States stands out for having a substantial portion of coverage through voluntary health insurance (VHI), represented by the orange bar. This indicates a larger role for private health insurance in the United States compared to the other countries.\n\n\nCode\nimport plotly.express as px\nimport pandas as pd\n\naverage_coverage = insurance_data.groupby(['Country', 'Insurance Type'])['% of total population'].mean().reset_index()\n\n# Create a treemap with detailed hover data\nfig = px.treemap(average_coverage, \n                 path=['Country', 'Insurance Type'], \n                 values='% of total population',\n                 color='% of total population', \n                 hover_data={'Country': True, \n                             'Insurance Type': True,\n                             '% of total population': ':.2f'},  \n                 color_continuous_scale=px.colors.sequential.Viridis, \n                 title='Treemap of Insurance Coverage by Country and Type')\n\n# Customize hover text for better data presentation\nfig.update_traces(hovertemplate=\"&lt;b&gt;%{label}&lt;/b&gt;&lt;br&gt;%{parent}&lt;br&gt;Coverage: %{value:.2f}%\"),\n\nfig.update_layout(\n    margin=dict(t=50, l=25, r=25, b=25),\n    paper_bgcolor='rgb(243, 243, 243)',\n    plot_bgcolor='rgb(243, 243, 243)',\n    font=dict(\n        family=\"Arial, sans-serif\",\n        size=12,\n        color=\"RebeccaPurple\"\n    ),\n    template='plotly'\n),\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 7: Insurance Coverage by Country and Type\n\n\n\n\nGovernment/compulsory health insurance coverage is dominant in most countries, occupying the larger areas within each country’s rectangle. The United States has a significant portion of the population covered by voluntary health insurance, as indicated by the large dark blue area within its rectangle."
  },
  {
    "objectID": "US.html",
    "href": "US.html",
    "title": "Healthcare Coverage in US",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport plotly.express as px\nimport plotly.io as pio\npio.renderers.default = 'notebook'\ndata = pd.read_csv(\"../data/clean_500.csv\")\n\nfig = px.scatter_geo(data,\n                     lat='Latitude',\n                     lon='Longitude',\n                     size='Data_Value',\n                     hover_name='CityName',\n                     hover_data={\n                         'StateAbbr': True,\n                         'Data_Value': ':.2f',\n                         'PopulationCount': True,\n                         'Measure': True\n                     },\n                     color='Data_Value',\n                     color_continuous_scale=px.colors.sequential.Teal,\n                     projection='albers usa',\n                     title='Health Insurance Coverage Map')\n\n#change text pos, color, and size of the bubbles\nfig.update_traces(\n    textposition='top center',\n    marker=dict(\n        line=dict(width=0)\n    )\n);\n\n\nfig.update_geos(\n    landcolor='lightgray',\n    bgcolor='white',\n    projection_scale=0.95,\n    center=dict(lat=37.0902, lon=-95.7129),\n    showcountries=True,\n    countrycolor='black',\n    showsubunits=True,\n    subunitcolor='black'\n);\n\n#color scale changes\nfig.update_layout(\n    coloraxis_colorbar=dict(\n        title='Data Value (%)',\n        thicknessmode='pixels', thickness=15,\n        lenmode='pixels', len=200\n    ),\n    margin=dict(t=50, l=0, r=0, b=0),\n    title=dict(\n        y=0.95,\n        x=0.5,\n        xanchor='center',\n        yanchor='top'\n    )\n);\n\n#hover info\nfig.update_layout(\n    hoverlabel=dict(\n        bgcolor=\"white\",\n        font_size=16,\n        font_family=\"Rockwell\"\n    )\n);\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 1: Health Insurance Coverage Map in US\n\n\n\n\n\n\nCode\nimport plotly.graph_objs as go\n\nmeasure_col_name = \"Data_Value\"\n\nstate_avg = data.groupby(\"StateAbbr\")[measure_col_name].mean().reset_index()\n\noverall_avg = state_avg[measure_col_name].mean()\n\nmax_state = state_avg.loc[state_avg['Data_Value'].idxmax()]\n\n#show the details\nstate_avg.head(), overall_avg, max_state\n\n#fig for us\nfig = go.Figure()\n\nfig.add_trace(go.Bar(\n    x=state_avg[\"StateAbbr\"],\n    y=state_avg[\"Data_Value\"],\n    name=\"%\",\n    marker_color=\"skyblue\"\n))\n\nfig.add_trace(go.Scatter(\n    x=state_avg[\"StateAbbr\"],\n    y=[overall_avg] * len(state_avg),\n    name=\"Average\",\n    line=dict(color=\"gray\", width=2, dash=\"dash\")\n))\n\nfig.add_annotation(\n    x=max_state['StateAbbr'],\n    y=max_state['Data_Value'],\n    text=f\"State: {max_state['StateAbbr']}&lt;br&gt;Average: {max_state['Data_Value']:.2f} %\",\n    showarrow=True,\n    arrowhead=1\n)\n\nfig.update_layout(\n    title={\n        'text': 'Avg. Health Insurance Coverage by States',\n        'y':0.9,\n        'x':0.5,\n        'xanchor': 'center',\n        'yanchor': 'top'},\n    xaxis_title=\"State\",\n    yaxis_title=\"Avg. Health Insutance Cover (%)\",\n    showlegend=False\n)\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 2: Average Health Insurance Coverage By Satates in US\n\n\n\n\nInteractive plot for the average percentage of health insurance coverage across various US states shows that Texas stands out with the highest coverage rate—almost 28%, well above the national average. The dashed horizontal line across the chart suggests the overall average health insurance coverage, allowing for a quick visual comparison between each state’s coverage and the overall average. This kind of info can really help us see where things are going well and where there’s room for improvement in making sure everyone has access to health care."
  },
  {
    "objectID": "US.html#health-insurance-coverage-in-us",
    "href": "US.html#health-insurance-coverage-in-us",
    "title": "Healthcare Coverage in US",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport plotly.express as px\nimport plotly.io as pio\npio.renderers.default = 'notebook'\ndata = pd.read_csv(\"../data/clean_500.csv\")\n\nfig = px.scatter_geo(data,\n                     lat='Latitude',\n                     lon='Longitude',\n                     size='Data_Value',\n                     hover_name='CityName',\n                     hover_data={\n                         'StateAbbr': True,\n                         'Data_Value': ':.2f',\n                         'PopulationCount': True,\n                         'Measure': True\n                     },\n                     color='Data_Value',\n                     color_continuous_scale=px.colors.sequential.Teal,\n                     projection='albers usa',\n                     title='Health Insurance Coverage Map')\n\n#change text pos, color, and size of the bubbles\nfig.update_traces(\n    textposition='top center',\n    marker=dict(\n        line=dict(width=0)\n    )\n);\n\n\nfig.update_geos(\n    landcolor='lightgray',\n    bgcolor='white',\n    projection_scale=0.95,\n    center=dict(lat=37.0902, lon=-95.7129),\n    showcountries=True,\n    countrycolor='black',\n    showsubunits=True,\n    subunitcolor='black'\n);\n\n#color scale changes\nfig.update_layout(\n    coloraxis_colorbar=dict(\n        title='Data Value (%)',\n        thicknessmode='pixels', thickness=15,\n        lenmode='pixels', len=200\n    ),\n    margin=dict(t=50, l=0, r=0, b=0),\n    title=dict(\n        y=0.95,\n        x=0.5,\n        xanchor='center',\n        yanchor='top'\n    )\n);\n\n#hover info\nfig.update_layout(\n    hoverlabel=dict(\n        bgcolor=\"white\",\n        font_size=16,\n        font_family=\"Rockwell\"\n    )\n);\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 1: Health Insurance Coverage Map in US\n\n\n\n\n\n\nCode\nimport plotly.graph_objs as go\n\nmeasure_col_name = \"Data_Value\"\n\nstate_avg = data.groupby(\"StateAbbr\")[measure_col_name].mean().reset_index()\n\noverall_avg = state_avg[measure_col_name].mean()\n\nmax_state = state_avg.loc[state_avg['Data_Value'].idxmax()]\n\n#show the details\nstate_avg.head(), overall_avg, max_state\n\n#fig for us\nfig = go.Figure()\n\nfig.add_trace(go.Bar(\n    x=state_avg[\"StateAbbr\"],\n    y=state_avg[\"Data_Value\"],\n    name=\"%\",\n    marker_color=\"skyblue\"\n))\n\nfig.add_trace(go.Scatter(\n    x=state_avg[\"StateAbbr\"],\n    y=[overall_avg] * len(state_avg),\n    name=\"Average\",\n    line=dict(color=\"gray\", width=2, dash=\"dash\")\n))\n\nfig.add_annotation(\n    x=max_state['StateAbbr'],\n    y=max_state['Data_Value'],\n    text=f\"State: {max_state['StateAbbr']}&lt;br&gt;Average: {max_state['Data_Value']:.2f} %\",\n    showarrow=True,\n    arrowhead=1\n)\n\nfig.update_layout(\n    title={\n        'text': 'Avg. Health Insurance Coverage by States',\n        'y':0.9,\n        'x':0.5,\n        'xanchor': 'center',\n        'yanchor': 'top'},\n    xaxis_title=\"State\",\n    yaxis_title=\"Avg. Health Insutance Cover (%)\",\n    showlegend=False\n)\n\nfig.show()\n\n\n\n\n                                                \n\n\nFigure 2: Average Health Insurance Coverage By Satates in US\n\n\n\n\nInteractive plot for the average percentage of health insurance coverage across various US states shows that Texas stands out with the highest coverage rate—almost 28%, well above the national average. The dashed horizontal line across the chart suggests the overall average health insurance coverage, allowing for a quick visual comparison between each state’s coverage and the overall average. This kind of info can really help us see where things are going well and where there’s room for improvement in making sure everyone has access to health care."
  },
  {
    "objectID": "US.html#marketplace-premium-data-in-us",
    "href": "US.html#marketplace-premium-data-in-us",
    "title": "Healthcare Coverage in US",
    "section": "Marketplace Premium Data in US",
    "text": "Marketplace Premium Data in US\n\n\nCode\nimport pandas as pd\nimport numpy as np\nimport plotly.graph_objects as go\n\n#import data\nenrollment_df = pd.read_csv('../data/kff_enrollment.csv')\nmetal_tier_df = pd.read_csv('../data/cleaned_kff.csv')\nissuers_df = pd.read_csv('../data/issuers.csv')\n\n#retain only the following cols\nissuers_df = issuers_df[['Location', 'Number of Issuers in 2024']]\n\n#merge dfs\nmerged_df = pd.merge(enrollment_df, metal_tier_df, on='Location')\nmerged_df = pd.merge(merged_df, issuers_df, on='Location')\nmerged_df = merged_df.drop('Average Benchmark Premium', axis=1)\nmerged_df = merged_df.drop(index=0)\n\n#calculate avg premium and rank based on premium avg (1 is lowest and 50 is highest)\nmerged_df['Average Premium'] = merged_df[['Average Lowest-Cost Bronze Premium', 'Average Lowest-Cost Silver Premium', 'Average Lowest-Cost Gold Premium']].mean(axis=1)\nmerged_df['Average Premium'] = merged_df['Average Premium'].round(2)\nmerged_df['Overall Rank'] = merged_df['Average Premium'].rank(method='min', ascending=True)\n\n#choose color scale\nheader_color = 'teal'\ncol_even_color = 'lightgreen'\ncol_odd_color = 'white'\n\n#create table\ntable_fig = go.Figure(data=[go.Table(\n    header=dict(\n        values=list(merged_df.columns),\n        line_color='black',\n        fill_color=header_color,\n        align='center',\n        font=dict(color='white', size=12)\n    ),\n    cells=dict(\n        values=[merged_df[col] for col in merged_df.columns], \n        line_color='black',\n        fill_color=[col_odd_color if i % 2 == 0 else col_even_color for i in range(len(merged_df))],\n        align='center',\n        font=dict(color='black', size=11)\n    ))\n])\n\ntable_fig.update_layout(\n    title='Marketplace Premium Data by State, 2024',\n    margin={'t': 50}  \n)\n\ntable_fig.show()\n\n\n\n\n                                                \n\n\nFigure 3: Marketplace Premium Data by US State in 2024\n\n\n\n\nThis table summarizes marketplace insurance enrollment by rank and tier in 2024 across all 50 states. Marketplace insurance is defined as health insurance coverage available through the Health Insurance Marketplace through The Affordable Care Act. It is intended to assist families and individuals in attaining affordable healthcare. The table also contains data on the number of marketplace insurance issuers per state, as well as the calculated average premium for each state. Then, we ranked the states in ascending order, meaning the state with the lowest average premium is rank #1 and the state with the highest average premium is rank #50. The marketplace data indicates that West Virginia has the highest premium and Maryland has the lowest average."
  },
  {
    "objectID": "Conclusion.html",
    "href": "Conclusion.html",
    "title": "Conclusion",
    "section": "",
    "text": "In all countries, the proportion of expenditures devoted to health has been on the rise consistently since 1980, with the rate of spending growth surpassing economic expansion. This increase can be attributed to advancements in medical technology, rising health sector prices, and a greater demand for services. The onset of the COVID-19 pandemic in 2020 led to a sharp increase in healthcare spending across nearly all nations, as governments took actions to curb the virus spread, including enhanced testing, vaccine development, and relief efforts. Although this spending has moderated, it remains elevated compared to previous years.\nThe life expectancy across the high-income countries has generally been high over the years, mostly within the range of 80 to 84 years, Japan consistently shows one of the highest life expectancies throughout the years, while the the United States seems to have a lower life expectancy compared to other high-income countries above, for example, while life expextancy in japan is 84.5 years, Us has a life expectancy of 76.4 years in 2021, which is the lowest among the countries listed.\nIn summary, Despite the highest healthcare spending as a percentage of GDP in the U.S., life expectancy the life expectancy is not ideal compared to other high-income countries. Other peer high income countries are achieving better health outcomes with less expenditure, it may relates to Healthcare System Efficiency, Lifestyle Factors and health insurance coverage…."
  },
  {
    "objectID": "Conclusion.html#what-is-the-healthcare-expenditure-and-life-expectancy-like-globally",
    "href": "Conclusion.html#what-is-the-healthcare-expenditure-and-life-expectancy-like-globally",
    "title": "Conclusion",
    "section": "",
    "text": "In all countries, the proportion of expenditures devoted to health has been on the rise consistently since 1980, with the rate of spending growth surpassing economic expansion. This increase can be attributed to advancements in medical technology, rising health sector prices, and a greater demand for services. The onset of the COVID-19 pandemic in 2020 led to a sharp increase in healthcare spending across nearly all nations, as governments took actions to curb the virus spread, including enhanced testing, vaccine development, and relief efforts. Although this spending has moderated, it remains elevated compared to previous years.\nThe life expectancy across the high-income countries has generally been high over the years, mostly within the range of 80 to 84 years, Japan consistently shows one of the highest life expectancies throughout the years, while the the United States seems to have a lower life expectancy compared to other high-income countries above, for example, while life expextancy in japan is 84.5 years, Us has a life expectancy of 76.4 years in 2021, which is the lowest among the countries listed.\nIn summary, Despite the highest healthcare spending as a percentage of GDP in the U.S., life expectancy the life expectancy is not ideal compared to other high-income countries. Other peer high income countries are achieving better health outcomes with less expenditure, it may relates to Healthcare System Efficiency, Lifestyle Factors and health insurance coverage…."
  },
  {
    "objectID": "Conclusion.html#what-is-the-insurance-coverage-type-different-globally",
    "href": "Conclusion.html#what-is-the-insurance-coverage-type-different-globally",
    "title": "Conclusion",
    "section": "What is the insurance coverage type different Globally?",
    "text": "What is the insurance coverage type different Globally?\nThen after analyzing the percentage of the population covered by public insurance and voluntary health insurance in the top 15 countries based on GDP. we realized that for most countries, the government/compulsory health insurance coverage forms the majority of the insurance coverage. The United States stands out for having a substantial portion of coverage through voluntary health insurance (VHI), This indicates a larger role for private health insurance in the United States compared to the other countries.\nSo, Government/compulsory health insurance coverage is dominant in most countries, occupying the larger areas within each country’s rectangle. The United States has a significant portion of the population covered by voluntary health insurance.\nGlobally, healthcare systems can be broadly categorized into universal coverage models, like those in Canada and many European countries, and more privatized models, such as the one predominant in the United States. In universal systems, governments typically play a significant role in financing healthcare, aiming to ensure that all citizens have access to necessary services without financial hardship. Contrastingly, the U.S. system is characterized by a mix of public and private insurance, with a substantial portion of healthcare provided by private entities."
  },
  {
    "objectID": "Conclusion.html#what-is-the-heathcare-coverage-like-in-the-us",
    "href": "Conclusion.html#what-is-the-heathcare-coverage-like-in-the-us",
    "title": "Conclusion",
    "section": "What is the Heathcare coverage like in the US?",
    "text": "What is the Heathcare coverage like in the US?\nInteractive plot for the average percentage of health insurance coverage across various US states shows that Texas stands out with the highest coverage rate—almost 28%, well above the national average. The dashed horizontal line across the chart suggests the overall average health insurance coverage, allowing for a quick visual comparison between each state’s coverage and the overall average. This kind of info can really help us see where things are going well and where there’s room for improvement in making sure everyone has access to health care.\nWe used a scrollable table to present 2024 marketplace insurance premiums for each state by different tiers: bronze, silver, and gold. We then calculated the average peremium per state and ranked the states from lowest to highest premium. This state data provides insight to the marketplace insurance premiums made available by the Affordable Care Act. Result rankings show Maryland as the state with the lowest average premiums and West Virginia with the highest average premiums."
  }
]